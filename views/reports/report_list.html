<script type="text/javascript" src="/resources/plugins/tableHeadFixer/tableHeadFixer.js"></script>

<style type="text/css">

            .fixTable {
                width: 1800px !important;
            }
            .fixTable td, .fixTable th {
                text-align: center;
                vertical-align: middle !important;
            }

            .red{
                color: red;
            }
            .green{
                color: #5cb85c;
            }

            .ok {
                color: black;
            }

            .not_ok {
                color: red;
            }
            .toggle.btn {
                min-width: 90px;
                min-height: 34px;
            }


</style>
<style>
  .toggle.ios, .toggle-on.ios, .toggle-off.ios { border-radius: 20px; }
  .toggle.ios .toggle-handle { border-radius: 20px; }
</style>

<section class="content" ng-cloak id="reportCtrl">
    <div class="container-fluid" style="overflow-y: hidden;">
        <br>
        <div class="row">
            <div class="col-md-6">
                <h4>Reports</h4>
            </div>
            <div class="col-md-6" style="margin-top:1%;">
                <button type="button" data-toggle="collapse" data-target="#filterBox" class="btn btn-primary btn-circle btn-sm pull-right" title="Filter" style="outline: 0;margin-right:5px"><i class="fa fa-filter" aria-hidden="true"></i>
                </button>
            </div>
        </div>
        <br>
        <div class="row collapse" id="filterBox">
            <div class="col-md-12">
                <div class="box box-primary paddingLeft0">
                    <div class="box-header with-border paddingLeft0 marginBorderHead">
                        <div class="formHeadDiv">
                            <div class="row">
                                <div class="col-md-6">
                                    <h1 class="formheading paddingLeft0">
                                        Filter
                                    </h1>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-header -->

                    <form id="filterDataForm" name="filterDataForm">
                        <div class="box-body marginEmailBody">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label class=""> Date</label>
                                        <div>
                                            <div class="input-group date">
                                                <div class="input-group-addon">
                                                    <i  class="fa fa-calendar"></i>
                                                </div>
                                                <input type="text" class="form-control" id="filterDate" name="filterDate" ng-model="rpc.filterDate"  placeholder="Enter date" style="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="">Product ID</label>
                                        <div>
                                            <div class="input-group" style="width:100%;">
                                                <select id="filterProductId" ng-model="rpc.filterProductId" name="filterProductId" class="form-control s2mn" style="width:100%;"  >
                                                    <option value="">Select Product</option>
                                                     <option value="{{product}}" ng-repeat="product in rpc.productList">{{product}}</option>
                                                 </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="">Status</label>
                                        <div>
                                            <div class="input-group" style="width:100%;">
                                                <select id="filterStatusId" ng-model="rpc.filterStatusId" name="filterStatusId" class="form-control s2mn" style="width:100%;"  >
                                                    <option value="">Select Status</option>
                                                     <option value="{{status.id}}" ng-repeat="status in rpc.statusList">{{status.value}}</option>
                                                 </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2" >
                                  <div class="form-group">
                                      <label class="" style="visibility: hidden;">Find</label>
                                      <div>
                                          <div class="input-group" style="width:100%;">
                                            <button  type="button" class="btn btn-default btn-md"  title="Find" ng-click="rpc.getReportList();" style="outline: 0;" ><i class="fa fa-search" aria-hidden="true"></i> &nbsp; Find
                                            </button>

                                          </div>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- /.box-body -->
                </div>
            </div>
        </div>
        <!-- Filter section ends here -->
        <br>

        <div>
            <div class="box-header with-border paddingLeft0 marginBorderHead" style="background: white;">
                <div class="formHeadDiv">
                    <div class="row">
                        <div class="col-md-12">
                        <div class="col-md-6">
                            <h1 class="formheading">
                                  Count ({{rpc.reportList.length}})
                            </h1>
                        </div>

                        <div class="col-md-6" ng-show="rpc.reportList.length > 0">
                            <div class="pull-right">
                              <input type="checkbox" data-toggle="toggle" id="toggle-switch" data-onstyle="success" data-offstyle="danger" >
                                <button type="button" class="btn btn-default btn-md"  title="Find" ng-click="rpc.download('PDF',0);" style="outline: 0;display: none;" > <i class="fa fa-file-pdf-o" style="color: red;"></i> PDF</button>
                                <!-- <button  type="button" class="btn btn-default btn-md"  title="Find" ng-click="exportToExcel('#hidden_table');" style="outline: 0;" > <i class="fa fa-file-excel-o" style="color: green;"></i> Excel
                                </button>

                                <export-to-pdf elem-id="tableToExport"></export-to-pdf> -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>


            <!-- <pre>{{rpc.data | json}}</pre> -->
            <div id="tableToExport">
                <div class="export-table" ng-repeat="product_data in rpc.data | orderBy:'+':true track by $index" id="export-table">
                    <div class="box-header with-border paddingLeft0 marginBorderHead" style="background: white;">

                        <div class="row">
                            <div class="col-md-12" >
                                <div class="col-md-6">
                                    <div class="pull-center">
                                        <h4>Product Id : {{product_data.project_id}}</h4>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="pull-right">
                                        <button type="button" class="btn btn-default btn-md"  title="Find" ng-click="rpc.download('PDF',product_data.project_id);" style="outline: 0;" > <i class="fa fa-file-pdf-o" style="color: red;"></i> PDF</button>
                                        <button  type="button" class="btn btn-default btn-md"  title="Find" ng-click="exportToExcel('#hidden_table',$index, product_data.project_id);" style="outline: 0;" > <i class="fa fa-file-excel-o" style="color: green;"></i> Excel
                                        </button>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="table-responsive" style="width: 100%;height: 400px;overflow: scroll;max-height: none;min-height: 0px;max-width: none;min-width: 0px;" >

                        <table class="table table-condensed table-bordered fixTable"  id="fixTable_{{$index}}">

                            <thead class="thead-default">
                                <tr>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Test Case #</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Test Condition</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Valid for Modes</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Mode</th>
                                    <th colspan="2" style="text-align: center;vertical-align: middle;">Accepted Tolerance</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Output</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Time when Trigger Occurred (TP3_T) (sec)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Time when Trigger Occurred (TP4_T)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP1 (VCC) (TP1_V)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP2 (Int. Firing Pulse)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP3 (Neutralization Pulse) TP3_V</th>
                                    <th colspan="4" style="text-align: center;vertical-align: middle;">TP4 (Firing Pulse)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP5 (3.3V Till 6 Sec)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP6 (Int. Firing Pulse)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">TP7 (Arming Safety) TP7_V @ 200ms (V)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">(Arming Safety) TP7_V2 @ 1.8 ms (V)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">Final Status (OK/NOT OK)</th>
                                    <th rowspan="2" style="text-align: center;vertical-align: middle;">DATE</th>
                                   <!--  <th>Action</th> -->
                                </tr>
                                <tr>
                                    <th style="text-align: center;vertical-align: middle;">Time (ms)</th>
                                    <th style="text-align: center;vertical-align: middle;">Voltage (V)</th>
                                    <th style="text-align: center;vertical-align: middle;">No. of Pulses (PC)</th>
                                    <th style="text-align: center;vertical-align: middle;">Pulse Width (ms) TP4_P_H</th>
                                    <th style="text-align: center;vertical-align: middle;">Pulse Gap (ms) TP4_P_L</th>
                                    <th style="text-align: center;vertical-align: middle;">Pulse Amplitude (V) TP4_V</th>
                                </tr>
                            </thead>
                            <!-- <pre>{{product_data |json}}</pre> -->
                            <!-- <div> -->
                                <tbody ng-repeat="test_case in product_data.test_cases" ng-if="test_case.ActualLength && !rpc.sequece">

                                    <!-- test case 1 -->
                                    <!-- <tr> -->
                                        <tr>
                                            <td rowspan="{{test_case['mode_length']  + test_case['ActualLength'] }}"> TC#{{test_case['Test Case']}}</td>
                                            <td rowspan="{{test_case['mode_length']  + test_case['ActualLength'] }}">{{test_case['Test Condition']}}</td>
                                            <td rowspan="{{test_case['mode_length']  + test_case['ActualLength'] }}">{{test_case['Valid for Modes']}}</td>

                                            <td rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" ng-if="test_case['mode_length'] > 0" >{{test_case.Mode_data[0]['mode_name']}}</td>
                                            <td ng-if="test_case['mode_length'] > 0" rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" >{{test_case.Mode_data[0]['Time (ms)']}}</td>
                                            <td ng-if="test_case['mode_length'] > 0" rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" >{{test_case.Mode_data[0]['Voltage (V)']}}</td>
                                            <th ng-if="test_case['mode_length'] > 0" style="color:black">Expected</th>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_3_time}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_time}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_1_voltage}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_2}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_3_voltage}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].number_of_pulse}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_pulse_high}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_pulse_low}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_voltage}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_5}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_6}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_7_V}}</td>
                                            <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_7_V2}}</td>
                                        </tr>
                                        <tr ng-repeat-start="mode_data in test_case.Mode_data" ng-if="$index > 0">
                                            <td rowspan="{{mode_data['Actual'].length + 1}}" >{{mode_data['mode_name']}}</td>
                                            <td rowspan="{{mode_data['Actual'].length + 1}}" >{{mode_data['Time (ms)']}}</td>
                                            <td rowspan="{{mode_data['Actual'].length + 1}}" >{{mode_data['Voltage (V)']}}</td>
                                            <th style="color:black">Expected</th>
                                            <td> {{mode_data['Expected'].test_point_3_time}}</td>
                                            <td> {{mode_data['Expected'].test_point_4_time}}</td>
                                            <td> {{mode_data['Expected'].test_point_1_voltage}}</td>
                                            <td> {{mode_data['Expected'].test_point_2}}</td>
                                            <td> {{mode_data['Expected'].test_point_3_voltage}}</td>
                                            <td> {{mode_data['Expected'].number_of_pulse}}</td>
                                            <td> {{mode_data['Expected'].test_point_4_pulse_high}}</td>
                                            <td> {{mode_data['Expected'].test_point_4_pulse_low}}</td>
                                            <td> {{mode_data['Expected'].test_point_4_voltage}}</td>
                                            <td> {{mode_data['Expected'].test_point_5}}</td>
                                            <td> {{mode_data['Expected'].test_point_6}}</td>
                                            <td> {{mode_data['Expected'].test_point_7_V}}</td>
                                            <td> {{mode_data['Expected'].test_point_7_V2}}</td>
                                        </tr>
                                        <tr ng-repeat-end ng-repeat="(key,value) in mode_data['Actual']">
                                            <th style="color:black">Actual</th>
                                            <td ng-if="rpc.checkIfExist('test_point_3_time',value.not_ok_columns)"> {{value.test_point_3_time}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_3_time',value.not_ok_columns)"> {{value.test_point_3_time}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_4_time',value.not_ok_columns)"> {{value.test_point_4_time}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_time',value.not_ok_columns)"> {{value.test_point_4_time}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_1_voltage',value.not_ok_columns)"> {{value.test_point_1_voltage}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_1_voltage',value.not_ok_columns)"> {{value.test_point_1_voltage}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_2',value.not_ok_columns)"> {{value.test_point_2}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_2',value.not_ok_columns)"> {{value.test_point_2}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_3_voltage',value.not_ok_columns)"> {{value.test_point_3_voltage}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_3_voltage',value.not_ok_columns)"> {{value.test_point_3_voltage}}</th>
                                            <td ng-if="rpc.checkIfExist('number_of_pulse',value.not_ok_columns)"> {{value.number_of_pulse}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('number_of_pulse',value.not_ok_columns)"> {{value.number_of_pulse}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_4_pulse_high',value.not_ok_columns)"> {{value.test_point_4_pulse_high}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_pulse_high',value.not_ok_columns)"> {{value.test_point_4_pulse_high}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_4_pulse_low',value.not_ok_columns)"> {{value.test_point_4_pulse_low}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_pulse_low',value.not_ok_columns)"> {{value.test_point_4_pulse_low}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_4_voltage',value.not_ok_columns)"> {{value.test_point_4_voltage}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_voltage',value.not_ok_columns)"> {{value.test_point_4_voltage}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_5',value.not_ok_columns)"> {{value.test_point_5}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_5',value.not_ok_columns)"> {{value.test_point_5}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_6',value.not_ok_columns)"> {{value.test_point_6}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_6',value.not_ok_columns)"> {{value.test_point_6}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_7_V',value.not_ok_columns)"> {{value.test_point_7_V}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_7_V',value.not_ok_columns)"> {{value.test_point_7_V}}</th>
                                            <td ng-if="rpc.checkIfExist('test_point_7_V2',value.not_ok_columns)"> {{value.test_point_7_V2}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('test_point_7_V2',value.not_ok_columns)"> {{value.test_point_7_V2}}</th>
                                            <th  class="green" ng-if="rpc.checkIfExist('status',value.not_ok_columns,value.status)" > {{value.status}}</th>
                                            <th  class="red" class="red" ng-if="!rpc.checkIfExist('status',value.not_ok_columns,value.status)"> {{value.status}}</th>
                                            <td ng-if="rpc.checkIfExist('created_at',value.not_ok_columns)"> {{value.created_at}}</td>
                                            <th  class="red" ng-if="!rpc.checkIfExist('created_at',value.not_ok_columns)"> {{value.created_at}}</th>
                                        </tr>
                                    <!-- </tr> -->
                                </tbody>
                            <!-- </div> -->

                                <tbody ng-repeat="test_case in product_data.test_cases" ng-if="test_case.ActualLength && rpc.sequece">
                                <!-- test case 1 -->
                                <!-- <tr> -->
                                    <tr>
                                        <td rowspan="{{test_case['mode_length']*2 }}"> TC#{{test_case['Test Case']}}</td>
                                        <td rowspan="{{test_case['mode_length']*2}}">{{test_case['Test Condition']}}</td>
                                        <td rowspan="{{test_case['mode_length']*2 }}">{{test_case['Valid for Modes']}}</td>


                                        <td rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" ng-if="test_case['mode_length'] > 0" >{{test_case.Mode_data[0]['mode_name']}}</td>
                                        <td ng-if="test_case['mode_length'] > 0" rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" >{{test_case.Mode_data[0]['Time (ms)']}}</td>
                                        <td ng-if="test_case['mode_length'] > 0" rowspan="{{test_case.Mode_data[0]['Actual'].length + 1}}" >{{test_case.Mode_data[0]['Voltage (V)']}}</td>
                                        <th ng-if="test_case['mode_length'] > 0" style="color:black">Expected</th>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_3_time}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_time}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_1_voltage}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_2}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_3_voltage}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].number_of_pulse}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_pulse_high}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_pulse_low}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_4_voltage}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_5}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_6}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_7_V}}</td>
                                        <td ng-if="test_case['mode_length'] > 0"> {{test_case.Mode_data[0]['Expected'].test_point_7_V2}}</td>
                                    </tr>
                                    <tr ng-repeat-start="mode_data in test_case.Mode_data" ng-if="$index > 0">
                                        <td rowspan="{{mode_data['Actual'].length>0?2:1}}" >{{mode_data['mode_name']}}</td>
                                        <td rowspan="{{mode_data['Actual'].length>0?2:1}}" >{{mode_data['Time (ms)']}}</td>
                                        <td rowspan="{{mode_data['Actual'].length>0?2:1}}" >{{mode_data['Voltage (V)']}}</td>
                                        <th style="color:black">Expected</th>
                                        <td> {{mode_data['Expected'].test_point_3_time}}</td>
                                        <td> {{mode_data['Expected'].test_point_4_time}}</td>
                                        <td> {{mode_data['Expected'].test_point_1_voltage}}</td>
                                        <td> {{mode_data['Expected'].test_point_2}}</td>
                                        <td> {{mode_data['Expected'].test_point_3_voltage}}</td>
                                        <td> {{mode_data['Expected'].number_of_pulse}}</td>
                                        <td> {{mode_data['Expected'].test_point_4_pulse_high}}</td>
                                        <td> {{mode_data['Expected'].test_point_4_pulse_low}}</td>
                                        <td> {{mode_data['Expected'].test_point_4_voltage}}</td>
                                        <td> {{mode_data['Expected'].test_point_5}}</td>
                                        <td> {{mode_data['Expected'].test_point_6}}</td>
                                        <td> {{mode_data['Expected'].test_point_7_V}}</td>
                                        <td> {{mode_data['Expected'].test_point_7_V2}}</td>
                                    </tr>
                                    <tr ng-repeat-end ng-repeat="(key,value) in mode_data['Actual'] track by $index" ng-show="$last">
                                        <th style="color:black">Actual</th>
                                        <td ng-if="rpc.checkIfExist('test_point_3_time',value.not_ok_columns)"> {{value.test_point_3_time}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_3_time',value.not_ok_columns)"> {{value.test_point_3_time}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_4_time',value.not_ok_columns)"> {{value.test_point_4_time}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_time',value.not_ok_columns)"> {{value.test_point_4_time}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_1_voltage',value.not_ok_columns)"> {{value.test_point_1_voltage}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_1_voltage',value.not_ok_columns)"> {{value.test_point_1_voltage}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_2',value.not_ok_columns)"> {{value.test_point_2}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_2',value.not_ok_columns)"> {{value.test_point_2}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_3_voltage',value.not_ok_columns)"> {{value.test_point_3_voltage}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_3_voltage',value.not_ok_columns)"> {{value.test_point_3_voltage}}</th>
                                        <td ng-if="rpc.checkIfExist('number_of_pulse',value.not_ok_columns)"> {{value.number_of_pulse}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('number_of_pulse',value.not_ok_columns)"> {{value.number_of_pulse}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_4_pulse_high',value.not_ok_columns)"> {{value.test_point_4_pulse_high}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_pulse_high',value.not_ok_columns)"> {{value.test_point_4_pulse_high}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_4_pulse_low',value.not_ok_columns)"> {{value.test_point_4_pulse_low}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_pulse_low',value.not_ok_columns)"> {{value.test_point_4_pulse_low}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_4_voltage',value.not_ok_columns)"> {{value.test_point_4_voltage}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_4_voltage',value.not_ok_columns)"> {{value.test_point_4_voltage}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_5',value.not_ok_columns)"> {{value.test_point_5}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_5',value.not_ok_columns)"> {{value.test_point_5}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_6',value.not_ok_columns)"> {{value.test_point_6}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_6',value.not_ok_columns)"> {{value.test_point_6}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_7_V',value.not_ok_columns)"> {{value.test_point_7_V}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_7_V',value.not_ok_columns)"> {{value.test_point_7_V}}</th>
                                        <td ng-if="rpc.checkIfExist('test_point_7_V2',value.not_ok_columns)"> {{value.test_point_7_V2}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('test_point_7_V2',value.not_ok_columns)"> {{value.test_point_7_V2}}</th>
                                        <th  class="green" ng-if="rpc.checkIfExist('status',value.not_ok_columns,value.status)" > {{value.status}}</th>
                                        <th  class="red" ng-if="!rpc.checkIfExist('status',value.not_ok_columns,value.status)"> {{value.status}}</th>
                                        <td ng-if="rpc.checkIfExist('created_at',value.not_ok_columns)"> {{value.created_at}}</td>
                                        <th  class="red" ng-if="!rpc.checkIfExist('created_at',value.not_ok_columns)"> {{value.created_at}}</th>
                                    </tr>
                                    <!-- </tr> -->
                                </tbody>
                        <!-- </div> -->
                        </table>

                        <div style="display: none;">
                            <table class="table table-condensed table-bordered"  id="hidden_table_{{$index}}">
                                <thead class="thead-default">
                                    <tr>
                                        <th>
                                            <img src="http://eitdsapi.syslogyx.com/img/1538054261.png">
                                        </th>
                                    </tr>
                                    <tr>
                                        <th  colspan="2" style="border:1px solid;text-align:center;padding: 0px"><h4>Product Id : </h4></th>
                                        <th  colspan="2" style="border:1px solid;text-align:center;padding: 0px"><h4>{{product_data.project_id}}</h4></th>
                                        <th  colspan="7" style="border:1px solid;text-align:center;padding: 0px"><h4>EITDS v2.0</h4></th>
                                        <th  colspan="2" style="border:1px solid;text-align:center;padding: 0px"><h4>Report Date : </h4></th>
                                        <th  colspan="2" style="border:1px solid;text-align:center;padding: 0px"><h4>{{rpc.currentDate}}</h4></th>
                                    </tr>
                                    <tr>
                                        <th  colspan="15" style="border:1px solid;text-align:center;padding: 0px"><h4>FUNCTIONAL TESTS</h4></th>
                                    </tr>
                                    <tr>
                                        <th rowspan="2" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Test Case</th>
                                        <th rowspan="2" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Test Condition</th>
                                        <th rowspan="2" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Mode</th>
                                        <th rowspan="2" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Time (ms)</th>
                                        <th rowspan="2" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Voltage (V)</th>
                                        <th colspan="10" style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">Actual Output / Expected Output</th>
                                    </tr>
                                    <tr>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP3_T</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP4_T</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP1_V</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP3_V</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">No. of Pulses</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP4_Width</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP4_Gap</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP4_V</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP7_V</th>
                                        <th style="border:1px solid;text-align: center;vertical-align: middle;padding: 0px">TP7_V2</th>
                                    </tr>
                                </thead>
          
                                <tbody ng-repeat="test_case in product_data.test_cases" ng-if="test_case.ActualLength">
                                    <tr ng-repeat="mode_data in test_case.Mode_data">
                                        <td ng-if="$first" rowspan="{{(test_case['mode_length'])}}"> TC#{{test_case['Test Case']}}</td>
                                        <td ng-if="$first" rowspan="{{(test_case['mode_length'])}}">{{test_case['Test Condition']}}</td>

                                        <td >{{mode_data['mode_name']}}</td>
                                        <td >{{mode_data['Time (ms)']}}</td>
                                        <td >{{mode_data['Voltage (V)']}}</td>

                                        <td ng-if="rpc.checkIfExist('test_point_3_time',mode_data['not_ok_columns'])"> {{mode_data['test_point_3_time']}}/<b>{{mode_data['Expected'].test_point_3_time}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_3_time',mode_data['not_ok_columns'])"> {{mode_data['test_point_3_time']}}/<b>{{mode_data['Expected'].test_point_3_time}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_4_time',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_time']}}/<b>{{mode_data['Expected'].test_point_4_time}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_4_time',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_time']}}/<b>{{mode_data['Expected'].test_point_4_time}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_1_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_1_voltage']}}/<b>{{mode_data['Expected'].test_point_1_voltage}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_1_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_1_voltage']}}/<b>{{mode_data['Expected'].test_point_1_voltage}}</b></th>
                                               
                                        <td ng-if="rpc.checkIfExist('test_point_3_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_3_voltage']}}/<b>{{mode_data['Expected'].test_point_3_voltage}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_3_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_3_voltage']}}/<b>{{mode_data['Expected'].test_point_3_voltage}}</b></th>

                                        <td ng-if="rpc.checkIfExist('number_of_pulse',mode_data['not_ok_columns'])"> {{mode_data['number_of_pulse']}}/<b>{{mode_data['Expected'].number_of_pulse}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('number_of_pulse',mode_data['not_ok_columns'])"> {{mode_data['number_of_pulse']}}/<b>{{mode_data['Expected'].number_of_pulse}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_4_pulse_high',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_pulse_high']}}/<b>{{mode_data['Expected'].test_point_4_pulse_high}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_4_pulse_high',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_pulse_high']}}/<b>{{mode_data['Expected'].test_point_4_pulse_high}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_4_pulse_low',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_pulse_low']}}/<b>{{mode_data['Expected'].test_point_4_pulse_low}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_4_pulse_low',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_pulse_low']}}/<b>{{mode_data['Expected'].test_point_4_pulse_low}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_4_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_voltage']}}/<b>{{mode_data['Expected'].test_point_4_voltage}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_4_voltage',mode_data['not_ok_columns'])"> {{mode_data['test_point_4_voltage']}}/<b>{{mode_data['Expected'].test_point_4_voltage}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_7_V',mode_data['not_ok_columns'])"> {{mode_data['test_point_7_V']}}/<b>{{mode_data['Expected'].test_point_7_V}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_7_V',mode_data['not_ok_columns'])"> {{mode_data['test_point_7_V']}}/<b>{{mode_data['Expected'].test_point_7_V}}</b></th>

                                        <td ng-if="rpc.checkIfExist('test_point_7_V2',mode_data['not_ok_columns'])"> {{mode_data['test_point_7_V2']}}/<b>{{mode_data['Expected'].test_point_7_V2}}</b></td>
                                        <th ng-if="!rpc.checkIfExist('test_point_7_V2',mode_data['not_ok_columns'])"> {{mode_data['test_point_7_V2']}}/<b>{{mode_data['Expected'].test_point_7_V2}}</b></th>

                                    </tr>
                                </tbody>
                                <tbody>
                                    <tr style="border:1px solid">
                                        <td style="border:1px solid" colspan="15"></td>
                                    </tr>
                                    <tr style="border:1px solid">
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4">Tested By</td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4">Verified By</td>
                                        <td  style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4">Approved By</td>

                                        <td rowspan="4" style="border:1px solid;text-align: center;vertical-align: middle;" colspan="3"> <div style="color:#adacac">Company Seal</div>   </td>
                                    </tr>
                                    <tr  rowspan="2" style="border:1px solid" height="25px">
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"> <div style="color:#adacac">(Signature)</div> </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;"  colspan="4"> <div style="color:#adacac">(Signature)</div>  </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;"  colspan="4"> <div style="color:#adacac">(Signature)</div>  </td>

                                    </tr>
                                    <tr style="border:1px solid">
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Name)</div> </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Name)</div> </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Name)</div> </td>
                                    </tr>
                                    <tr style="border:1px solid">
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Designation)</div> </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Designation)</div> </td>
                                        <td style="border:1px solid;text-align: center;vertical-align: middle;" colspan="4"><div style="color:#adacac">(Designation)</div> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row col-sm-12" style="padding-right: 0px;">
                <ul id="pagination-sec1" class="pagination-sm" style="float: right;margin-top: 5px;margin-bottom: 45px"></ul>
            </div>
        </div>
    </div>
</section>

<script>

    $(document).ready(function () {
        $("html, body").animate({scrollTop: 0}, "fast");
        $(".fixTable").tableHeadFixer({
            head: true,
            foot: false,
            left: 1,
            right: 0,
            'z-index': 0
        });

        //Date picker
        $('#filterDate').datepicker({
            autoclose: true,
            format:"yyyy-mm-dd",
            todayHighlight: true
        });
        $('#toggle-switch').bootstrapToggle({
          on: 'All',
          off: 'Latest'
        });

        $('#toggle-switch').change(function() {
          var status=$(this).prop('checked');
          var scope = angular.element(document.querySelector("#reportCtrl")).scope();
               scope.$apply(function () {

                   scope.isChecked(status);
               });

        })

    });

</script>
